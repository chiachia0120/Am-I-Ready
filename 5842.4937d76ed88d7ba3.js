"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5842],{3461:(I,h,a)=>{a.r(h),a.d(h,{ChecklistPage:()=>y});var d=a(2200),_=a(4341),c=a(9893),p=a(6354),u=a(9172),C=a(9974),k=a(4360),e=a(3664),s=a(2615),m=a(6919);const b=["weatherCard"];function P(r,l){if(1&r&&(e.qex(0),e.j41(1,"ion-card")(2,"ion-card-content")(3,"div",12)(4,"div",13)(5,"div",14),e.EFF(6),e.k0s(),e.j41(7,"div",15),e.EFF(8),e.k0s(),e.j41(9,"div",16),e.EFF(10),e.k0s()(),e.nrm(11,"img",17),e.k0s(),e.j41(12,"div",18)(13,"div")(14,"div",19),e.EFF(15,"Highest"),e.k0s(),e.j41(16,"div",20),e.EFF(17),e.k0s()(),e.j41(18,"div")(19,"div",19),e.EFF(20,"Lowest"),e.k0s(),e.j41(21,"div",20),e.EFF(22),e.k0s()()()()(),e.j41(23,"div",21)(24,"div",22),e.nrm(25,"img",17),e.j41(26,"div",23),e.EFF(27),e.k0s(),e.nrm(28,"div",24)(29,"img",17),e.j41(30,"div",25),e.nrm(31,"ion-progress-bar",5),e.nI1(32,"async"),e.j41(33,"p",6),e.EFF(34),e.nI1(35,"async"),e.nI1(36,"number"),e.k0s()()()(),e.bVm()),2&r){const t=l.ngIf,n=e.XpG();e.R7$(6),e.JRh(n.cityName),e.R7$(2),e.JRh(t.description),e.R7$(2),e.SpI("",t.temperature_now,"\xb0"),e.R7$(),e.Y8G("src",n.mapWeatherIcon(t.weatherCode),e.B4B),e.R7$(6),e.SpI("",t.temperature_max,"\xb0"),e.R7$(5),e.SpI("",t.temperature_min,"\xb0"),e.R7$(),e.AVh("hide",!n.showMiniWeather),e.R7$(2),e.Y8G("src",n.mapWeatherIcon(t.weatherCode),e.B4B),e.R7$(2),e.Lme(" ",t.temperature_now,"\xb0 ",t.description," "),e.R7$(2),e.Y8G("src",n.mapWeatherIcon(t.weatherCode),e.B4B),e.R7$(2),e.Y8G("value",e.bMT(32,14,n.progress$)),e.R7$(3),e.SpI(" ",e.i5U(36,18,100*(e.bMT(35,16,n.progress$)??0),"1.0-0"),"% ")}}function M(r,l){if(1&r){const t=e.RV6();e.j41(0,"ion-input",34),e.bIt("keyup.enter",function(i){s.eBV(t);const o=e.XpG().$implicit,g=e.XpG();return s.Njj(g.editItem(o,i))})("ionBlur",function(i){s.eBV(t);const o=e.XpG().$implicit,g=e.XpG();return s.Njj(g.editItem(o,i))}),e.k0s()}if(2&r){const t=e.XpG().$implicit;e.Y8G("value",t.label)}}function w(r,l){if(1&r&&(e.j41(0,"ion-label"),e.EFF(1),e.k0s()),2&r){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.label)}}function O(r,l){if(1&r){const t=e.RV6();e.j41(0,"ion-item-sliding",null,1)(2,"ion-item"),e.nrm(3,"ion-icon",26),e.DNE(4,M,1,1,"ion-input",27)(5,w,2,1,"ion-label",3),e.j41(6,"ion-checkbox",28),e.bIt("ionChange",function(){const i=s.eBV(t).$implicit,o=e.XpG();return s.Njj(o.toggleChecklistItem(i))}),e.k0s()(),e.j41(7,"ion-item-options",29)(8,"ion-item-option",30),e.bIt("click",function(){const i=s.eBV(t).$implicit,o=e.sdS(1),g=e.XpG();return s.Njj(g.startEdit(i,o))}),e.nrm(9,"ion-icon",31),e.k0s(),e.j41(10,"ion-item-option",32),e.bIt("click",function(){const i=s.eBV(t).$implicit,o=e.sdS(1),g=e.XpG();return s.Njj(g.deleteItem(i,o))}),e.nrm(11,"ion-icon",33),e.k0s()()()}if(2&r){const t=l.$implicit;e.R7$(3),e.Y8G("name",t.icon||"briefcase-outline"),e.R7$(),e.Y8G("ngIf",t.editing),e.R7$(),e.Y8G("ngIf",!t.editing),e.R7$(),e.Y8G("checked",t.selected)}}function v(r,l){1&r&&(e.j41(0,"div",35)(1,"div",36)(2,"h2"),e.EFF(3,"You\u2019re sorted!"),e.k0s(),e.j41(4,"p"),e.EFF(5,"Let\u2019s go \u{1f389}"),e.k0s()()())}let y=(()=>{class r{constructor(t,n){this.planService=t,this.weatherService=n,this.showSorted=!1,this.showMiniWeather=!1,this.checklist=[]}get weather$(){return this.planService.state$.pipe((0,p.T)(t=>t.weather))}get cityName(){return this.weatherService.cityName}get progress$(){return this.planService.state$.pipe((0,p.T)(t=>{const n=t.checklist??[];return n&&0!==n.length?n.filter(o=>o.selected).length/n.length:0}))}get allDone$(){return this.planService.state$.pipe((0,p.T)(t=>t.checklist.length>0&&t.checklist.every(n=>n.selected)))}ngOnInit(){this.allDoneSub=this.allDone$.pipe((0,u.Z)(!1),function x(){return(0,C.N)((r,l)=>{let t,n=!1;r.subscribe((0,k._)(l,i=>{const o=t;t=i,n&&l.next([o,i]),n=!0}))})}()).subscribe(([t,n])=>{!t&&n&&(this.showSorted=!0,setTimeout(()=>this.showSorted=!1,3e3))}),this.planService.state$.subscribe(t=>{this.checklist=t.checklist})}ngOnDestroy(){this.allDoneSub?.unsubscribe()}toggleChecklistItem(t){this.planService.toggleChecklistItem(t.id)}mapWeatherIcon(t){return`assets/icon/${t}.svg`}onScroll(){const t=document.querySelector(".weather-footer");if(t){const n=t.getBoundingClientRect();this.showMiniWeather=n.bottom<=0}}addItem(t){const n=(t??"").toString().trim();n&&this.planService.addChecklistItem(n)}startEdit(t,n){const i=this.planService._state$.value.checklist.map(o=>o.id===t.id?{...o,editing:!0}:o);this.planService.patch({checklist:i}),n.close()}editItem(t,n){const i=n.target.value??"";i.trim()&&(t.label=i.trim()),t.editing=!1}deleteItem(t,n){this.checklist=this.checklist.filter(i=>i.id!==t.id),n.close()}static#e=this.\u0275fac=function(n){return new(n||r)(e.rXU(m.J8),e.rXU(m.Wd))};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["ng-component"]],viewQuery:function(n,i){if(1&n&&e.GBs(b,5),2&n){let o;e.mGM(o=e.lsd())&&(i.weatherCard=o.first)}},decls:18,vars:15,consts:[["newActivity",""],["slidingItem",""],[3,"ionScroll","scrollEvents"],[4,"ngIf"],[1,"progress-bar-container"],[3,"value"],[1,"progress-label"],[4,"ngFor","ngForOf"],["type","text","fill","outline","placeholder","Add an item"],["fill","clear","slot","end",3,"click"],["name","add-outline"],["class","sorted-popup",4,"ngIf"],[1,"weather-card"],[1,"weather-left"],[1,"city"],[1,"description"],[1,"temp"],["alt","weather icon",1,"weather-icon",3,"src"],[1,"weather-footer"],[1,"label"],[1,"value"],[1,"sticky-header"],[1,"mini-weather"],[1,"text"],[1,"spacer"],[1,"progress-container"],["slot","start",3,"name"],[3,"value","keyup.enter","ionBlur",4,"ngIf"],["slot","end",3,"ionChange","checked"],["side","end"],["color","primary",3,"click"],["slot","icon-only","name","pencil-outline"],["color","danger",3,"click"],["slot","icon-only","name","trash-outline"],[3,"keyup.enter","ionBlur","value"],[1,"sorted-popup"],[1,"sorted-circle"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"ion-content",2),e.bIt("ionScroll",function(){return s.eBV(o),s.Njj(i.onScroll())}),e.DNE(1,P,37,21,"ng-container",3),e.nI1(2,"async"),e.j41(3,"div",4),e.nrm(4,"ion-progress-bar",5),e.nI1(5,"async"),e.j41(6,"p",6),e.EFF(7),e.nI1(8,"async"),e.nI1(9,"number"),e.k0s()(),e.j41(10,"ion-list"),e.DNE(11,O,12,4,"ion-item-sliding",7),e.j41(12,"ion-item"),e.nrm(13,"ion-input",8,0),e.j41(15,"ion-button",9),e.bIt("click",function(){s.eBV(o);const f=e.sdS(14);return i.addItem(f.value),s.Njj(f.value="")}),e.nrm(16,"ion-icon",10),e.k0s()()(),e.DNE(17,v,6,0,"div",11),e.k0s()}2&n&&(e.Y8G("scrollEvents",!0),e.R7$(),e.Y8G("ngIf",e.bMT(2,6,i.weather$)),e.R7$(3),e.Y8G("value",e.bMT(5,8,i.progress$)),e.R7$(3),e.SpI(" ",e.i5U(9,12,100*(e.bMT(8,10,i.progress$)??0),"1.0-0"),"% "),e.R7$(4),e.Y8G("ngForOf",i.checklist),e.R7$(6),e.Y8G("ngIf",i.showSorted))},dependencies:[d.MD,d.Sq,d.bT,_.YN,c.bv,c.Jm,c.b_,c.I9,c.eY,c.W9,c.iq,c.$w,c.uz,c.LU,c.CE,c.A7,c.he,c.nf,c.FH,c.hB,c.Gw,d.Jj,d.QX],styles:["ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #efe3c7;--color: #000;--border-color: #efe3c7}ion-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 4px 12px #0000001a;margin:12px;background:#fff;overflow:hidden}ion-card-content[_ngcontent-%COMP%]{padding-inline-start:0;padding-inline-end:0;padding-top:0;padding-bottom:0}.weather-card[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px}.weather-card[_ngcontent-%COMP%]   .weather-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;align-items:center}.weather-card[_ngcontent-%COMP%]   .weather-left[_ngcontent-%COMP%]   .city[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#222}.weather-card[_ngcontent-%COMP%]   .weather-left[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:16px}.weather-card[_ngcontent-%COMP%]   .weather-left[_ngcontent-%COMP%]   .temp[_ngcontent-%COMP%]{font-size:32px;font-weight:700;margin-top:4px;color:#222}.weather-card[_ngcontent-%COMP%]   .weather-icon[_ngcontent-%COMP%]{max-height:100px}.weather-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-around;background:#f5f5f5;padding:12px 0;text-align:center}.weather-footer[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:16px;color:#555;margin-bottom:4px}.weather-footer[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#888}.progress-bar-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:8px;padding:0 12px}.progress-bar-container[_ngcontent-%COMP%]   .progress-label[_ngcontent-%COMP%]{font-size:14px;color:var(--ion-color-medium)}.progress-bar-container[_ngcontent-%COMP%]   ion-progress-bar[_ngcontent-%COMP%]{--background: #ffff;--progress-background: #cccccc;height:12px;border-radius:10px}ion-list[_ngcontent-%COMP%]{margin:12px;border-radius:10px;background:transparent}ion-item[_ngcontent-%COMP%]{margin-bottom:10px;border-radius:8px;background:#fff;box-shadow:0 2px 4px #00000014;--padding-start: 16px;--inner-padding-end: 12px;--min-height: 60px;--border-style: none}@media (prefers-color-scheme: dark){ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--color: #333}}ion-item[_ngcontent-%COMP%]::part(native){background:#fff;border-radius:8px;box-shadow:0 2px 4px #00000014}ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#333;margin-right:12px}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:500;font-size:16px;color:#222}ion-checkbox[_ngcontent-%COMP%]{--size: 22px;--checkbox-background-checked: #f9c74f;--checkbox-background: #fff;--border-color: #aaa;--border-color-checked: #f9c74f;--checkmark-color: #000;margin-left:auto}.sorted-popup[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;z-index:2000;background:#fff6;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.sorted-circle[_ngcontent-%COMP%]{width:280px;height:280px;background:#ffe599;border-radius:50%;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;box-shadow:0 8px 25px #00000040;animation:_ngcontent-%COMP%_popIn .5s ease-out forwards}.sorted-circle[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:700;color:#333}.sorted-circle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0 0;font-size:18px;color:#555}@keyframes _ngcontent-%COMP%_popIn{0%{transform:scale(.5);opacity:0}70%{transform:scale(1.1);opacity:1}to{transform:scale(1)}}.sticky-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10;background:#fff;padding:10px 12px 8px;box-shadow:0 2px 4px #0000000d;display:flex;flex-direction:row;transition:opacity .3s ease;background-color:#efe3c7;height:80px}.sticky-header.hide[_ngcontent-%COMP%]{display:none}.sticky-header[_ngcontent-%COMP%]   .mini-weather[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr 1fr;grid-template-rows:1fr 1fr;align-items:center;font-size:14px;font-weight:500;width:100%}.sticky-header[_ngcontent-%COMP%]   .mini-weather[_ngcontent-%COMP%]   .weather-icon[_ngcontent-%COMP%]{grid-row:1/span 2;grid-column:1;max-width:70px;align-self:center;border:transparent}.sticky-header[_ngcontent-%COMP%]   .mini-weather[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{grid-row:1;grid-column:2;font-weight:400;font-size:16px;text-align:center;white-space:nowrap}.sticky-header[_ngcontent-%COMP%]   .mini-weather[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{grid-row:1;grid-column:3}.sticky-header[_ngcontent-%COMP%]   .mini-weather[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]{grid-row:2;grid-column:2/span 2;display:flex;align-items:center;gap:8px;padding:0 12px}.sticky-header[_ngcontent-%COMP%]   .mini-weather[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-label[_ngcontent-%COMP%]{font-size:14px;color:var(--ion-color-medium)}.sticky-header[_ngcontent-%COMP%]   .mini-weather[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   ion-progress-bar[_ngcontent-%COMP%]{--background: #fff;--progress-background: #cccccc;height:12px;border-radius:10px;flex:1}"]})}return r})()}}]);