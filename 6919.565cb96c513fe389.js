"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6919],{5083:(Pe,he,L)=>{L.d(he,{E_:()=>ne,F3:()=>z});var p=L(467),J=function(l){return l.Unimplemented="UNIMPLEMENTED",l.Unavailable="UNAVAILABLE",l}(J||{});class ee extends Error{constructor(r,a,h){super(r),this.message=r,this.code=a,this.data=h}}const ge=l=>{const r=l.CapacitorCustomPlatform||null,a=l.Capacitor||{},h=a.Plugins=a.Plugins||{},f=()=>null!==r?r.name:(l=>{var r,a;return l?.androidBridge?"android":null!==(a=null===(r=l?.webkit)||void 0===r?void 0:r.messageHandlers)&&void 0!==a&&a.bridge?"ios":"web"})(l),A=v=>{var _;return null===(_=a.PluginHeaders)||void 0===_?void 0:_.find(q=>q.name===v)},x=new Map;return a.convertFileSrc||(a.convertFileSrc=v=>v),a.getPlatform=f,a.handleError=v=>l.console.error(v),a.isNativePlatform=()=>"web"!==f(),a.isPluginAvailable=v=>{const _=x.get(v);return!(!_?.platforms.has(f())&&!A(v))},a.registerPlugin=(v,_={})=>{const q=x.get(v);if(q)return console.warn(`Capacitor plugin "${v}" already registered. Cannot register plugins twice.`),q.proxy;const F=f(),U=A(v);let M;const ve=function(){var C=(0,p.A)(function*(){return!M&&F in _?M=M="function"==typeof _[F]?yield _[F]():_[F]:null!==r&&!M&&"web"in _&&(M=M="function"==typeof _.web?yield _.web():_.web),M});return function(){return C.apply(this,arguments)}}(),oe=C=>{let E;const S=(...k)=>{const D=ve().then(N=>{const K=((C,E)=>{var S,k;if(!U){if(C)return null===(k=C[E])||void 0===k?void 0:k.bind(C);throw new ee(`"${v}" plugin is not implemented on ${F}`,J.Unimplemented)}{const D=U?.methods.find(N=>E===N.name);if(D)return"promise"===D.rtype?N=>a.nativePromise(v,E.toString(),N):(N,K)=>a.nativeCallback(v,E.toString(),N,K);if(C)return null===(S=C[E])||void 0===S?void 0:S.bind(C)}})(N,C);if(K){const V=K(...k);return E=V?.remove,V}throw new ee(`"${v}.${C}()" is not implemented on ${F}`,J.Unimplemented)});return"addListener"===C&&(D.remove=(0,p.A)(function*(){return E()})),D};return S.toString=()=>`${C.toString()}() { [capacitor code] }`,Object.defineProperty(S,"name",{value:C,writable:!1,configurable:!1}),S},Z=oe("addListener"),ue=oe("removeListener"),de=(C,E)=>{const S=Z({eventName:C},E),k=function(){var N=(0,p.A)(function*(){const K=yield S;ue({eventName:C,callbackId:K},E)});return function(){return N.apply(this,arguments)}}(),D=new Promise(N=>S.then(()=>N({remove:k})));return D.remove=(0,p.A)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield k()}),D},re=new Proxy({},{get(C,E){switch(E){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return U?de:Z;case"removeListener":return ue;default:return oe(E)}}});return h[v]=re,x.set(v,{name:v,proxy:re,platforms:new Set([...Object.keys(_),...U?[F]:[]])}),re},a.Exception=ee,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a},te=(l=>l.Capacitor=ge(l))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),z=te.registerPlugin;class ne{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(r,a){var h=this;let f=!1;this.listeners[r]||(this.listeners[r]=[],f=!0),this.listeners[r].push(a);const y=this.windowListeners[r];y&&!y.registered&&this.addWindowListener(y),f&&this.sendRetainedArgumentsForEvent(r);const A=function(){var x=(0,p.A)(function*(){return h.removeListener(r,a)});return function(){return x.apply(this,arguments)}}();return Promise.resolve({remove:A})}removeAllListeners(){var r=this;return(0,p.A)(function*(){r.listeners={};for(const a in r.windowListeners)r.removeWindowListener(r.windowListeners[a]);r.windowListeners={}})()}notifyListeners(r,a,h){const f=this.listeners[r];if(f)f.forEach(u=>u(a));else if(h){let u=this.retainedEventArguments[r];u||(u=[]),u.push(a),this.retainedEventArguments[r]=u}}hasListeners(r){var a;return!(null===(a=this.listeners[r])||void 0===a||!a.length)}registerWindowListener(r,a){this.windowListeners[a]={registered:!1,windowEventName:r,pluginEventName:a,handler:h=>{this.notifyListeners(a,h)}}}unimplemented(r="not implemented"){return new te.Exception(r,J.Unimplemented)}unavailable(r="not available"){return new te.Exception(r,J.Unavailable)}removeListener(r,a){var h=this;return(0,p.A)(function*(){const f=h.listeners[r];if(!f)return;const u=f.indexOf(a);h.listeners[r].splice(u,1),h.listeners[r].length||h.removeWindowListener(h.windowListeners[r])})()}addWindowListener(r){window.addEventListener(r.windowEventName,r.handler),r.registered=!0}removeWindowListener(r){r&&(window.removeEventListener(r.windowEventName,r.handler),r.registered=!1)}sendRetainedArgumentsForEvent(r){const a=this.retainedEventArguments[r];a&&(delete this.retainedEventArguments[r],a.forEach(h=>{this.notifyListeners(r,h)}))}}const ae=l=>encodeURIComponent(l).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),ce=l=>l.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Q extends ne{getCookies(){return(0,p.A)(function*(){const r=document.cookie,a={};return r.split(";").forEach(h=>{if(h.length<=0)return;let[f,u]=h.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");f=ce(f).trim(),u=ce(u).trim(),a[f]=u}),a})()}setCookie(r){return(0,p.A)(function*(){try{const a=ae(r.key),h=ae(r.value),f=`; expires=${(r.expires||"").replace("expires=","")}`,u=(r.path||"/").replace("path=",""),y=null!=r.url&&r.url.length>0?`domain=${r.url}`:"";document.cookie=`${a}=${h||""}${f}; path=${u}; ${y};`}catch(a){return Promise.reject(a)}})()}deleteCookie(r){return(0,p.A)(function*(){try{document.cookie=`${r.key}=; Max-Age=0`}catch(a){return Promise.reject(a)}})()}clearCookies(){return(0,p.A)(function*(){try{const r=document.cookie.split(";")||[];for(const a of r)document.cookie=a.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(r){return Promise.reject(r)}})()}clearAllCookies(){var r=this;return(0,p.A)(function*(){try{yield r.clearCookies()}catch(a){return Promise.reject(a)}})()}}z("CapacitorCookies",{web:()=>new Q});const pe=function(){var l=(0,p.A)(function*(r){return new Promise((a,h)=>{const f=new FileReader;f.onload=()=>{const u=f.result;a(u.indexOf(",")>=0?u.split(",")[1]:u)},f.onerror=u=>h(u),f.readAsDataURL(r)})});return function(a){return l.apply(this,arguments)}}();class le extends ne{request(r){return(0,p.A)(function*(){const a=((l,r={})=>{const a=Object.assign({method:l.method||"GET",headers:l.headers},r),f=((l={})=>{const r=Object.keys(l);return Object.keys(l).map(f=>f.toLocaleLowerCase()).reduce((f,u,y)=>(f[u]=l[r[y]],f),{})})(l.headers)["content-type"]||"";if("string"==typeof l.data)a.body=l.data;else if(f.includes("application/x-www-form-urlencoded")){const u=new URLSearchParams;for(const[y,A]of Object.entries(l.data||{}))u.set(y,A);a.body=u.toString()}else if(f.includes("multipart/form-data")||l.data instanceof FormData){const u=new FormData;if(l.data instanceof FormData)l.data.forEach((A,w)=>{u.append(w,A)});else for(const A of Object.keys(l.data))u.append(A,l.data[A]);a.body=u;const y=new Headers(a.headers);y.delete("content-type"),a.headers=y}else(f.includes("application/json")||"object"==typeof l.data)&&(a.body=JSON.stringify(l.data));return a})(r,r.webFetchExtra),h=((l,r=!0)=>l?Object.entries(l).reduce((h,f)=>{const[u,y]=f;let A,w;return Array.isArray(y)?(w="",y.forEach(x=>{A=r?encodeURIComponent(x):x,w+=`${u}=${A}&`}),w.slice(0,-1)):(A=r?encodeURIComponent(y):y,w=`${u}=${A}`),`${h}&${w}`},"").substr(1):null)(r.params,r.shouldEncodeUrlParams),f=h?`${r.url}?${h}`:r.url,u=yield fetch(f,a),y=u.headers.get("content-type")||"";let w,x,{responseType:A="text"}=u.ok?r:{};switch(y.includes("application/json")&&(A="json"),A){case"arraybuffer":case"blob":x=yield u.blob(),w=yield pe(x);break;case"json":w=yield u.json();break;default:w=yield u.text()}const X={};return u.headers.forEach((v,_)=>{X[_]=v}),{data:w,headers:X,status:u.status,url:u.url}})()}get(r){var a=this;return(0,p.A)(function*(){return a.request(Object.assign(Object.assign({},r),{method:"GET"}))})()}post(r){var a=this;return(0,p.A)(function*(){return a.request(Object.assign(Object.assign({},r),{method:"POST"}))})()}put(r){var a=this;return(0,p.A)(function*(){return a.request(Object.assign(Object.assign({},r),{method:"PUT"}))})()}patch(r){var a=this;return(0,p.A)(function*(){return a.request(Object.assign(Object.assign({},r),{method:"PATCH"}))})()}delete(r){var a=this;return(0,p.A)(function*(){return a.request(Object.assign(Object.assign({},r),{method:"DELETE"}))})()}}z("CapacitorHttp",{web:()=>new le})},6919:(Pe,he,L)=>{L.d(he,{pG:()=>et,J8:()=>ct,HK:()=>lt,Wd:()=>ee});var p=L(2615),J=L(9330);let ee=(()=>{class e{constructor(t){this.http=t,this.cityName="London",this.currentLocation={lat:51.5072,lon:-.1276}}initLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{this.currentLocation={lat:t.coords.latitude,lon:t.coords.longitude},console.log("User location set:",this.currentLocation),this.getCityName(this.currentLocation.lat,this.currentLocation.lon)},t=>{console.warn("Failed to retrieve location, using default city London",t)}):console.warn("Browser does not support geolocation, using default city London")}getCityName(t,s){this.http.get(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${t}&longitude=${s}&localityLanguage=en`).subscribe(i=>{this.cityName=i.city||i.locality,console.log("City:",this.cityName)})}getWeather(){const{lat:t,lon:s}=this.currentLocation;return this.http.get(`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${s}&current_weather=true&daily=temperature_2m_max,temperature_2m_min&timezone=GMT`)}static#e=this.\u0275fac=function(s){return new(s||e)(p.KVO(J.Qq))};static#t=this.\u0275prov=p.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var m=L(467);const z=["user","model","function","system"];var Q=function(e){return e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER",e}(Q||{});class O extends Error{constructor(n){super(`[GoogleGenerativeAI Error]: ${n}`)}}class Y extends O{constructor(n,t){super(n),this.response=t}}class le extends O{constructor(n,t,s,o){super(n),this.status=t,this.statusText=s,this.errorDetails=o}}class H extends O{}class l extends O{}var u=function(e){return e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents",e}(u||{});class y{constructor(n,t,s,o,i){this.model=n,this.task=t,this.apiKey=s,this.stream=o,this.requestOptions=i}toString(){var n,t;const s=(null===(n=this.requestOptions)||void 0===n?void 0:n.apiVersion)||"v1beta";let i=`${(null===(t=this.requestOptions)||void 0===t?void 0:t.baseUrl)||"https://generativelanguage.googleapis.com"}/${s}/${this.model}:${this.task}`;return this.stream&&(i+="?alt=sse"),i}}function w(e){return x.apply(this,arguments)}function x(){return(x=(0,m.A)(function*(e){var n;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",function A(e){const n=[];return e?.apiClient&&n.push(e.apiClient),n.push("genai-js/0.24.1"),n.join(" ")}(e.requestOptions)),t.append("x-goog-api-key",e.apiKey);let s=null===(n=e.requestOptions)||void 0===n?void 0:n.customHeaders;if(s){if(!(s instanceof Headers))try{s=new Headers(s)}catch(o){throw new H(`unable to convert customHeaders value ${JSON.stringify(s)} to Headers: ${o.message}`)}for(const[o,i]of s.entries()){if("x-goog-api-key"===o)throw new H(`Cannot set reserved header name ${o}`);if("x-goog-api-client"===o)throw new H(`Header name ${o} can only be set using the apiClient field`);t.append(o,i)}}return t})).apply(this,arguments)}function v(){return(v=(0,m.A)(function*(e,n,t,s,o,i){const c=new y(e,n,t,s,i);return{url:c.toString(),fetchOptions:Object.assign(Object.assign({},oe(i)),{method:"POST",headers:yield w(c),body:o})}})).apply(this,arguments)}function _(e,n,t,s,o){return q.apply(this,arguments)}function q(){return q=(0,m.A)(function*(e,n,t,s,o,i={},c=fetch){const{url:d,fetchOptions:g}=yield function X(e,n,t,s,o,i){return v.apply(this,arguments)}(e,n,t,s,o,i);return function F(e,n){return U.apply(this,arguments)}(d,g,c)}),q.apply(this,arguments)}function U(){return U=(0,m.A)(function*(e,n,t=fetch){let s;try{s=yield t(e,n)}catch(o){!function M(e,n){let t=e;throw"AbortError"===t.name?(t=new l(`Request aborted when fetching ${n.toString()}: ${e.message}`),t.stack=e.stack):e instanceof le||e instanceof H||(t=new O(`Error fetching from ${n.toString()}: ${e.message}`),t.stack=e.stack),t}(o,e)}return s.ok||(yield function ve(e,n){return se.apply(this,arguments)}(s,e)),s}),U.apply(this,arguments)}function se(){return(se=(0,m.A)(function*(e,n){let s,t="";try{const o=yield e.json();t=o.error.message,o.error.details&&(t+=` ${JSON.stringify(o.error.details)}`,s=o.error.details)}catch{}throw new le(`Error fetching from ${n.toString()}: [${e.status} ${e.statusText}] ${t}`,e.status,e.statusText,s)})).apply(this,arguments)}function oe(e){const n={};if(void 0!==e?.signal||e?.timeout>=0){const t=new AbortController;e?.timeout>=0&&setTimeout(()=>t.abort(),e.timeout),e?.signal&&e.signal.addEventListener("abort",()=>{t.abort()}),n.signal=t.signal}return n}function Z(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),C(e.candidates[0]))throw new Y(`${E(e)}`,e);return function ue(e){var n,t,s,o;const i=[];if(null!==(t=null===(n=e.candidates)||void 0===n?void 0:n[0].content)&&void 0!==t&&t.parts)for(const c of null===(o=null===(s=e.candidates)||void 0===s?void 0:s[0].content)||void 0===o?void 0:o.parts)c.text&&i.push(c.text),c.executableCode&&i.push("\n```"+c.executableCode.language+"\n"+c.executableCode.code+"\n```\n"),c.codeExecutionResult&&i.push("\n```\n"+c.codeExecutionResult.output+"\n```\n");return i.length>0?i.join(""):""}(e)}if(e.promptFeedback)throw new Y(`Text not available. ${E(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),C(e.candidates[0]))throw new Y(`${E(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),de(e)[0]}if(e.promptFeedback)throw new Y(`Function call not available. ${E(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),C(e.candidates[0]))throw new Y(`${E(e)}`,e);return de(e)}if(e.promptFeedback)throw new Y(`Function call not available. ${E(e)}`,e)},e}function de(e){var n,t,s,o;const i=[];if(null!==(t=null===(n=e.candidates)||void 0===n?void 0:n[0].content)&&void 0!==t&&t.parts)for(const c of null===(o=null===(s=e.candidates)||void 0===s?void 0:s[0].content)||void 0===o?void 0:o.parts)c.functionCall&&i.push(c.functionCall);if(i.length>0)return i}const re=[Q.RECITATION,Q.SAFETY,Q.LANGUAGE];function C(e){return!!e.finishReason&&re.includes(e.finishReason)}function E(e){var n,t,s;let o="";if(e.candidates&&0!==e.candidates.length||!e.promptFeedback){if(null!==(s=e.candidates)&&void 0!==s&&s[0]){const i=e.candidates[0];C(i)&&(o+=`Candidate was blocked due to ${i.finishReason}`,i.finishMessage&&(o+=`: ${i.finishMessage}`))}}else o+="Response was blocked",!(null===(n=e.promptFeedback)||void 0===n)&&n.blockReason&&(o+=` due to ${e.promptFeedback.blockReason}`),null!==(t=e.promptFeedback)&&void 0!==t&&t.blockReasonMessage&&(o+=`: ${e.promptFeedback.blockReasonMessage}`);return o}function S(e){return this instanceof S?(this.v=e,this):new S(e)}"function"==typeof SuppressedError&&SuppressedError;const D=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function K(e){return V.apply(this,arguments)}function V(){return(V=(0,m.A)(function*(e){const n=[],t=e.getReader();for(;;){const{done:s,value:o}=yield t.read();if(s)return Z(Fe(n));n.push(o)}})).apply(this,arguments)}function je(e){return function k(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,s=t.apply(e,n||[]),i=[];return o={},c("next"),c("throw"),c("return"),o[Symbol.asyncIterator]=function(){return this},o;function c(b){s[b]&&(o[b]=function(P){return new Promise(function(B,I){i.push([b,P,B,I])>1||d(b,P)})})}function d(b,P){try{!function g(b){b.value instanceof S?Promise.resolve(b.value.v).then(T,G):W(i[0][2],b)}(s[b](P))}catch(B){W(i[0][3],B)}}function T(b){d("next",b)}function G(b){d("throw",b)}function W(b,P){b(P),i.shift(),i.length&&d(i[0][0],i[0][1])}}(this,arguments,function*(){const t=e.getReader();for(;;){const{value:s,done:o}=yield S(t.read());if(o)break;yield yield S(Z(s))}})}function Fe(e){const n=e[e.length-1],t={promptFeedback:n?.promptFeedback};for(const s of e){if(s.candidates){let o=0;for(const i of s.candidates)if(t.candidates||(t.candidates=[]),t.candidates[o]||(t.candidates[o]={index:o}),t.candidates[o].citationMetadata=i.citationMetadata,t.candidates[o].groundingMetadata=i.groundingMetadata,t.candidates[o].finishReason=i.finishReason,t.candidates[o].finishMessage=i.finishMessage,t.candidates[o].safetyRatings=i.safetyRatings,i.content&&i.content.parts){t.candidates[o].content||(t.candidates[o].content={role:i.content.role||"user",parts:[]});const c={};for(const d of i.content.parts)d.text&&(c.text=d.text),d.functionCall&&(c.functionCall=d.functionCall),d.executableCode&&(c.executableCode=d.executableCode),d.codeExecutionResult&&(c.codeExecutionResult=d.codeExecutionResult),0===Object.keys(c).length&&(c.text=""),t.candidates[o].content.parts.push(c)}o++}s.usageMetadata&&(t.usageMetadata=s.usageMetadata)}return t}function xe(e,n,t,s){return _e.apply(this,arguments)}function _e(){return(_e=(0,m.A)(function*(e,n,t,s){return function N(e){const t=function He(e){const n=e.getReader();return new ReadableStream({start(s){let o="";return function i(){return n.read().then(({value:c,done:d})=>{if(d)return o.trim()?void s.error(new O("Failed to parse stream")):void s.close();o+=c;let T,g=o.match(D);for(;g;){try{T=JSON.parse(g[1])}catch{return void s.error(new O(`Error parsing JSON response: "${g[1]}"`))}s.enqueue(T),o=o.substring(g[0].length),g=o.match(D)}return i()}).catch(c=>{let d=c;throw d.stack=c.stack,d="AbortError"===d.name?new l("Request aborted when reading from the stream"):new O("Error reading from the stream"),d})}()}})}(e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0}))),[s,o]=t.tee();return{stream:je(s),response:K(o)}}(yield _(n,u.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(t),s))})).apply(this,arguments)}function Te(e,n,t,s){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,m.A)(function*(e,n,t,s){return{response:Z(yield(yield _(n,u.GENERATE_CONTENT,e,!1,JSON.stringify(t),s)).json())}})).apply(this,arguments)}function Le(e){if(null!=e){if("string"==typeof e)return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function ie(e){let n=[];if("string"==typeof e)n=[{text:e}];else for(const t of e)n.push("string"==typeof t?{text:t}:t);return function Ke(e){const n={role:"user",parts:[]},t={role:"function",parts:[]};let s=!1,o=!1;for(const i of e)"functionResponse"in i?(t.parts.push(i),o=!0):(n.parts.push(i),s=!0);if(s&&o)throw new O("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!s&&!o)throw new O("No content is provided for sending chat message.");return s?n:t}(n)}function Ne(e){let n;return n=e.contents?e:{contents:[ie(e)]},e.systemInstruction&&(n.systemInstruction=Le(e.systemInstruction)),n}const $e=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],qe={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Me(e){var n;if(void 0===e.candidates||0===e.candidates.length)return!1;const t=null===(n=e.candidates[0])||void 0===n?void 0:n.content;if(void 0===t||void 0===t.parts||0===t.parts.length)return!1;for(const s of t.parts)if(void 0===s||0===Object.keys(s).length||void 0!==s.text&&""===s.text)return!1;return!0}const De="SILENT_ERROR";class We{constructor(n,t,s,o={}){this.model=t,this.params=s,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=n,s?.history&&(function Ve(e){let n=!1;for(const t of e){const{role:s,parts:o}=t;if(!n&&"user"!==s)throw new O(`First content should be with role 'user', got ${s}`);if(!z.includes(s))throw new O(`Each item should include role field. Got ${s} but valid roles are: ${JSON.stringify(z)}`);if(!Array.isArray(o))throw new O("Content should have 'parts' property with an array of Parts");if(0===o.length)throw new O("Each Content should have at least one part");const i={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const d of o)for(const g of $e)g in d&&(i[g]+=1);const c=qe[s];for(const d of $e)if(!c.includes(d)&&i[d]>0)throw new O(`Content with role '${s}' can't contain '${d}' part`);n=!0}}(s.history),this._history=s.history)}getHistory(){var n=this;return(0,m.A)(function*(){return yield n._sendPromise,n._history})()}sendMessage(n){var t=this;return(0,m.A)(function*(s,o={}){var i,c,d,g,T,G;yield t._sendPromise;const W=ie(s),b={safetySettings:null===(i=t.params)||void 0===i?void 0:i.safetySettings,generationConfig:null===(c=t.params)||void 0===c?void 0:c.generationConfig,tools:null===(d=t.params)||void 0===d?void 0:d.tools,toolConfig:null===(g=t.params)||void 0===g?void 0:g.toolConfig,systemInstruction:null===(T=t.params)||void 0===T?void 0:T.systemInstruction,cachedContent:null===(G=t.params)||void 0===G?void 0:G.cachedContent,contents:[...t._history,W]},P=Object.assign(Object.assign({},t._requestOptions),o);let B;return t._sendPromise=t._sendPromise.then(()=>Te(t._apiKey,t.model,b,P)).then(I=>{var j;if(Me(I.response)){t._history.push(W);const fe=Object.assign({parts:[],role:"model"},null===(j=I.response.candidates)||void 0===j?void 0:j[0].content);t._history.push(fe)}else{const fe=E(I.response);fe&&console.warn(`sendMessage() was unsuccessful. ${fe}. Inspect response object for details.`)}B=I}).catch(I=>{throw t._sendPromise=Promise.resolve(),I}),yield t._sendPromise,B}).apply(this,arguments)}sendMessageStream(n){var t=this;return(0,m.A)(function*(s,o={}){var i,c,d,g,T,G;yield t._sendPromise;const W=ie(s),b={safetySettings:null===(i=t.params)||void 0===i?void 0:i.safetySettings,generationConfig:null===(c=t.params)||void 0===c?void 0:c.generationConfig,tools:null===(d=t.params)||void 0===d?void 0:d.tools,toolConfig:null===(g=t.params)||void 0===g?void 0:g.toolConfig,systemInstruction:null===(T=t.params)||void 0===T?void 0:T.systemInstruction,cachedContent:null===(G=t.params)||void 0===G?void 0:G.cachedContent,contents:[...t._history,W]},P=Object.assign(Object.assign({},t._requestOptions),o),B=xe(t._apiKey,t.model,b,P);return t._sendPromise=t._sendPromise.then(()=>B).catch(I=>{throw new Error(De)}).then(I=>I.response).then(I=>{if(Me(I)){t._history.push(W);const j=Object.assign({},I.candidates[0].content);j.role||(j.role="model"),t._history.push(j)}else{const j=E(I);j&&console.warn(`sendMessageStream() was unsuccessful. ${j}. Inspect response object for details.`)}}).catch(I=>{I.message!==De&&console.error(I)}),B}).apply(this,arguments)}}function ye(){return(ye=(0,m.A)(function*(e,n,t,s){return(yield _(n,u.COUNT_TOKENS,e,!1,JSON.stringify(t),s)).json()})).apply(this,arguments)}function Ce(){return(Ce=(0,m.A)(function*(e,n,t,s){return(yield _(n,u.EMBED_CONTENT,e,!1,JSON.stringify(t),s)).json()})).apply(this,arguments)}function Ae(){return(Ae=(0,m.A)(function*(e,n,t,s){const o=t.requests.map(c=>Object.assign(Object.assign({},c),{model:n}));return(yield _(n,u.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:o}),s)).json()})).apply(this,arguments)}class Ue{constructor(n,t,s={}){this.apiKey=n,this._requestOptions=s,this.model=t.model.includes("/")?t.model:`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=Le(t.systemInstruction),this.cachedContent=t.cachedContent}generateContent(n){var t=this;return(0,m.A)(function*(s,o={}){var i;const c=Ne(s),d=Object.assign(Object.assign({},t._requestOptions),o);return Te(t.apiKey,t.model,Object.assign({generationConfig:t.generationConfig,safetySettings:t.safetySettings,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:null===(i=t.cachedContent)||void 0===i?void 0:i.name},c),d)}).apply(this,arguments)}generateContentStream(n){var t=this;return(0,m.A)(function*(s,o={}){var i;const c=Ne(s),d=Object.assign(Object.assign({},t._requestOptions),o);return xe(t.apiKey,t.model,Object.assign({generationConfig:t.generationConfig,safetySettings:t.safetySettings,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:null===(i=t.cachedContent)||void 0===i?void 0:i.name},c),d)}).apply(this,arguments)}startChat(n){var t;return new We(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(t=this.cachedContent)||void 0===t?void 0:t.name},n),this._requestOptions)}countTokens(n){var t=this;return(0,m.A)(function*(s,o={}){const i=function Be(e,n){var t;let s={model:n?.model,generationConfig:n?.generationConfig,safetySettings:n?.safetySettings,tools:n?.tools,toolConfig:n?.toolConfig,systemInstruction:n?.systemInstruction,cachedContent:null===(t=n?.cachedContent)||void 0===t?void 0:t.name,contents:[]};const o=null!=e.generateContentRequest;if(e.contents){if(o)throw new H("CountTokensRequest must have one of contents or generateContentRequest, not both.");s.contents=e.contents}else if(o)s=Object.assign(Object.assign({},s),e.generateContentRequest);else{const i=ie(e);s.contents=[i]}return{generateContentRequest:s}}(s,{model:t.model,generationConfig:t.generationConfig,safetySettings:t.safetySettings,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t.cachedContent}),c=Object.assign(Object.assign({},t._requestOptions),o);return function Je(e,n,t,s){return ye.apply(this,arguments)}(t.apiKey,t.model,i,c)}).apply(this,arguments)}embedContent(n){var t=this;return(0,m.A)(function*(s,o={}){const i=function Ye(e){return"string"==typeof e||Array.isArray(e)?{content:ie(e)}:e}(s),c=Object.assign(Object.assign({},t._requestOptions),o);return function Xe(e,n,t,s){return Ce.apply(this,arguments)}(t.apiKey,t.model,i,c)}).apply(this,arguments)}batchEmbedContents(n){var t=this;return(0,m.A)(function*(s,o={}){const i=Object.assign(Object.assign({},t._requestOptions),o);return function ze(e,n,t,s){return Ae.apply(this,arguments)}(t.apiKey,t.model,s,i)}).apply(this,arguments)}}class Qe{constructor(n){this.apiKey=n}getGenerativeModel(n,t){if(!n.model)throw new O("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Ue(this.apiKey,n,t)}getGenerativeModelFromCachedContent(n,t,s){if(!n.name)throw new H("Cached content must contain a `name` field.");if(!n.model)throw new H("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const c of o)if(t?.[c]&&n[c]&&t?.[c]!==n[c]){if("model"===c&&(t.model.startsWith("models/")?t.model.replace("models/",""):t.model)===(n.model.startsWith("models/")?n.model.replace("models/",""):n.model))continue;throw new H(`Different value for "${c}" specified in modelParams (${t[c]}) and cachedContent (${n[c]})`)}const i=Object.assign(Object.assign({},t),{model:n.model,tools:n.tools,toolConfig:n.toolConfig,systemInstruction:n.systemInstruction,cachedContent:n});return new Ue(this.apiKey,i,s)}}let et=(()=>{class e{constructor(){this.genAI=new Qe("AIzaSyCH4TDa5XGrIl3Z-fsgqgpG9BfOdlBy7nc")}generateChecklist(t){var s=this;return(0,m.A)(function*(){let o="\nYou are an assistant that generates a checklist of items to prepare before going out.\nThe checklist must be practical and based on the user's planned activities and today's weather conditions.\nThe checklist should be simple, concrete, and designed to reduce memory burden for neurodivergent users.\n";t.preferences&&Object.keys(t.preferences).length>0&&(o+=`\nUser preferences (Yes = usually true, No = usually false):\n${JSON.stringify(t.preferences,null,2)}\n`),o+=`\nPlans:\n${t.plans.map((g,T)=>`${T+1}. ${g}`).join("\n")}\n\nWeather:\n- Current temperature: ${t.weather.temperature_now}\xb0C\n- Max temperature today: ${t.weather.temperature_max}\xb0C\n- Min temperature today: ${t.weather.temperature_min}\xb0C\n- Windspeed: ${t.weather.windspeed} km/h\n- Time of day: ${1===t.weather.is_day?"Daytime":"Nighttime"}\n- Condition: ${t.weather.weather_description}\n\nPlease output a checklist of things the user should bring.\nThe output must be a JSON array of objects, where each object has:\n- "label": the item text\n- "icon": an Ionicons icon name relevant to the item (example: "school-outline", "water-outline", "sunny-outline", "umbrella-outline").\n\nExample:\n[\n  { "label": "School bag", "icon": "school-outline" },\n  { "label": "Water bottle", "icon": "water-outline" },\n  { "label": "Sunscreen", "icon": "sunny-outline" }\n]\n`;const d=(yield s.genAI.getGenerativeModel({model:"gemini-1.5-flash"}).generateContent(o)).response.text();console.log("prompt",o),console.log("Raw response:",d);try{const g=d.replace(/```json/gi,"").replace(/```/g,"").replace(/\/\/.*$/gm,"").replace(/,\s*]/g,"]").trim();return JSON.parse(g)}catch(g){return console.error("JSON parse failed:",g,d),[]}})()}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=p.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var tt=L(4412),nt=L(6354);const ke={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let be;const st=new Uint8Array(16),R=[];for(let e=0;e<256;++e)R.push((e+256).toString(16).slice(1));const $=function rt(e,n,t){if(ke.randomUUID&&!n&&!e)return ke.randomUUID();const s=(e=e||{}).random??e.rng?.()??function ot(){if(!be){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");be=crypto.getRandomValues.bind(crypto)}return be(st)}();if(s.length<16)throw new Error("Random bytes length must be >= 16");if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,n){if((t=t||0)<0||t+16>n.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let o=0;o<16;++o)n[t+o]=s[o];return n}return function Ge(e,n=0){return(R[e[n+0]]+R[e[n+1]]+R[e[n+2]]+R[e[n+3]]+"-"+R[e[n+4]]+R[e[n+5]]+"-"+R[e[n+6]]+R[e[n+7]]+"-"+R[e[n+8]]+R[e[n+9]]+"-"+R[e[n+10]]+R[e[n+11]]+R[e[n+12]]+R[e[n+13]]+R[e[n+14]]+R[e[n+15]]).toLowerCase()}(s)},Oe=(0,L(5083).F3)("Preferences",{web:()=>L.e(2924).then(L.bind(L,2924)).then(e=>new e.PreferencesWeb)});let at=(()=>{class e{set(t,s){return(0,m.A)(function*(){yield Oe.set({key:t,value:JSON.stringify(s)})})()}get(t){return(0,m.A)(function*(){const{value:s}=yield Oe.get({key:t});return s?JSON.parse(s):null})()}remove(t){return(0,m.A)(function*(){yield Oe.remove({key:t})})()}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=p.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),ct=(()=>{class e{constructor(t){this.store=t,this._state$=new tt.t({dateISO:(new Date).toISOString().slice(0,10),activities:[{id:$(),title:"Go to work",selected:!1},{id:$(),title:"Go to school",selected:!1},{id:$(),title:"Do exercise",selected:!1},{id:$(),title:"Go shopping",selected:!1},{id:$(),title:"Meet someone",selected:!1}],checklist:[],generatedAt:null}),this.state$=this._state$.asObservable(),this.lastRemoved=null,this.restore()}restore(){var t=this;return(0,m.A)(function*(){const s=yield t.store.get("FALSE");if(s)t._state$.next(s);else{const o={dateISO:(new Date).toISOString().slice(0,10),activities:[{id:$(),title:"Go to work",selected:!1},{id:$(),title:"Go to school",selected:!1},{id:$(),title:"Do exercise",selected:!1},{id:$(),title:"Go shopping",selected:!1},{id:$(),title:"Meet someone",selected:!1}],checklist:[],generatedAt:null};t._state$.next(o),t.persist()}})()}persist(){this.store.set("FALSE",this._state$.value)}patch(t){this._state$.next({...this._state$.value,...t}),this.persist()}get plans$(){return this._state$.asObservable().pipe((0,nt.T)(t=>t.activities))}addActivity(t){const s={id:$(),title:t.trim(),selected:!1};s.title&&this.patch({activities:[...this._state$.value.activities,s]})}toggleActivity(t){const s=this._state$.value.activities.map(o=>o.id===t?{...o,selected:!o.selected}:o);this.patch({activities:s})}removeActivity(t){const s=this._state$.value,o=s.activities.find(i=>i.id===t)||null;o&&(this.lastRemoved=o),this._state$.next({...s,activities:s.activities.filter(i=>i.id!==t)})}restoreActivity(t){if(!this.lastRemoved)return;const s=this._state$.value;this._state$.next({...s,activities:[...s.activities,this.lastRemoved]}),this.lastRemoved=null}setChecklist(t){const s=t.map(o=>({id:$(),label:o.label,icon:o.icon,selected:!1,required:!1}));this.patch({checklist:s,generatedAt:(new Date).toISOString()})}toggleChecklistItem(t){const s=this._state$.value.checklist.map(o=>o.id===t?{...o,selected:!o.selected}:o);this.patch({checklist:s})}addChecklistItem(t){const s=this._state$.value,o={id:crypto.randomUUID(),label:t.trim(),selected:!1,icon:"create-outline",custom:!0};this._state$.next({...s,checklist:[...s.checklist,o]})}clearChecklist(){this.patch({checklist:[],generatedAt:null})}setWeather(t){this.patch({weather:t})}static#e=this.\u0275fac=function(s){return new(s||e)(p.KVO(at))};static#t=this.\u0275prov=p.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Ie="user_preferences";let lt=(()=>{class e{constructor(){}setPreferences(t){localStorage.setItem(Ie,JSON.stringify(t))}getPreferences(){const t=localStorage.getItem(Ie);return t?JSON.parse(t):null}clearPreferences(){localStorage.removeItem(Ie)}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=p.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})()}}]);